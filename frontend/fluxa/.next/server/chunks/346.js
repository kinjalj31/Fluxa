"use strict";exports.id=346,exports.ids=[346],exports.modules={3653:(e,t,n)=>{n.d(t,{R:()=>InvoiceListView});var r=n(30784),s=n(9885),i=n(43872),a=n.n(i),l=n(33987),o=n.n(l),d=n(21971),c=n.n(d),x=n(16854),u=n(61272),h=n.n(u),p=n(99360),g=n.n(p),j=n(76267),f=n.n(j),m=n(77782),b=n.n(m),v=n(95843),y=n.n(v),S=n(1853),I=n.n(S),w=n(68101),W=n.n(w),z=n(77523),P=n.n(z),R=n(70138),_=n.n(R),Z=n(44233),C=n.n(Z),F=n(80765),U=n.n(F),D=n(24608),k=n.n(D),A=n(92133),B=n.n(A),T=n(15061),L=n.n(T),N=n(98993),E=n(18302),M=n(26617),q=n(43900),G=n(70022),O=n(53224),V=n(11184),$=n(23458),H=n(23503);let getStatusColor=e=>{switch(e){case"uploaded":return"info";case"processing":return"warning";case"processed":case"completed":case"validated":return"success";case"failed":return"error";default:return"default"}},getFieldStatus=e=>null==e||""===e?{icon:r.jsx(N.Z,{sx:{color:"grey.400",fontSize:16}}),color:"grey.400"}:{icon:r.jsx(E.Z,{sx:{color:"success.main",fontSize:16}}),color:"success.main"},ExtractionReport=({extract:e})=>{if(!e)return r.jsx(a(),{sx:{p:2,bgcolor:"grey.50",borderRadius:1},children:r.jsx(o(),{variant:"body2",color:"text.secondary",children:"No extraction data available"})});let t=[{label:"Invoice Number",value:e.invoice_number},{label:"Sender Address",value:e.sender_address},{label:"Receiver Address",value:e.receiver_address},{label:"Product",value:e.product},{label:"Quantity",value:e.quantity},{label:"Unit Price",value:e.unit_price},{label:"Subtotal",value:e.subtotal},{label:"VAT Amount",value:e.vat_amount},{label:"Total Gross",value:e.total_gross},{label:"Bank IBAN",value:e.bank_iban},{label:"Bank BIC",value:e.bank_bic},{label:"Bank Name",value:e.bank_name}];return(0,r.jsxs)(a(),{sx:{p:2,bgcolor:"grey.50",borderRadius:1,minWidth:400},children:[r.jsx(o(),{variant:"subtitle2",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:"Extraction Report"}),r.jsx(c(),{container:!0,spacing:1,children:t.map((e,t)=>{let n=getFieldStatus(e.value);return r.jsx(c(),{item:!0,xs:12,children:(0,r.jsxs)(x.ZP,{direction:"row",alignItems:"center",spacing:1,children:[n.icon,(0,r.jsxs)(o(),{variant:"caption",sx:{minWidth:100,fontSize:"0.7rem"},children:[e.label,":"]}),r.jsx(o(),{variant:"caption",sx:{fontSize:"0.7rem",color:e.value?"text.primary":"text.secondary",fontWeight:e.value?500:400},children:e.value||"Missing"})]})},t)})}),r.jsx(h(),{sx:{my:1}}),(0,r.jsxs)(o(),{variant:"caption",color:"text.secondary",children:["Status: ",e.processing_status," | Job ID: ",e.textract_job_id?.slice(0,8),"..."]})]})},InvoiceListView=()=>{let e=(0,$.TL)(),{invoices:t,loading:n}=(0,$.CG)(e=>e.invoice),[i,l]=(0,s.useState)(0),[d,c]=(0,s.useState)(10);(0,s.useEffect)(()=>{e((0,H.WM)())},[e]);let x=t.slice(i*d,i*d+d),getStatusIcon=e=>{switch(e){case"uploaded":case"processing":return r.jsx(M.Z,{});case"processed":case"completed":return r.jsx(q.Z,{});case"validated":return r.jsx(G.Z,{});case"failed":return r.jsx(O.Z,{});default:return r.jsx(V.Z,{})}};return n?r.jsx(a(),{display:"flex",justifyContent:"center",p:4,children:r.jsx(g(),{size:40})}):(0,r.jsxs)(f(),{elevation:4,sx:{borderRadius:3,background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)"},children:[r.jsx(b(),{avatar:r.jsx(y(),{sx:{bgcolor:"primary.main"},children:r.jsx(V.Z,{})}),title:r.jsx(o(),{variant:"h5",fontWeight:600,children:"Invoice List"}),subheader:`${t.length} total invoices`}),r.jsx(h(),{}),r.jsx(I(),{sx:{p:0},children:0===t.length?(0,r.jsxs)(a(),{display:"flex",flexDirection:"column",alignItems:"center",py:6,px:3,children:[r.jsx(V.Z,{sx:{fontSize:64,color:"grey.300",mb:2}}),r.jsx(o(),{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No invoices uploaded yet"}),r.jsx(o(),{variant:"body2",color:"text.secondary",children:"Upload your first invoice to get started"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(W(),{children:(0,r.jsxs)(P(),{children:[r.jsx(_(),{children:(0,r.jsxs)(C(),{sx:{bgcolor:"grey.50"},children:[r.jsx(U(),{sx:{fontWeight:600,width:"20%"},children:"File Name"}),r.jsx(U(),{sx:{fontWeight:600,width:"15%"},children:"Date"}),r.jsx(U(),{sx:{fontWeight:600,width:"55%"},children:"Report"}),r.jsx(U(),{sx:{fontWeight:600,width:"10%"},children:"Status"})]})}),r.jsx(k(),{children:x.map((e,t)=>(0,r.jsxs)(C(),{sx:{"&:hover":{bgcolor:"grey.50"},"&:nth-of-type(odd)":{bgcolor:"rgba(0,0,0,0.02)"}},children:[r.jsx(U(),{children:(0,r.jsxs)(a(),{display:"flex",alignItems:"center",gap:2,children:[r.jsx(y(),{sx:{width:32,height:32,bgcolor:"primary.light",fontSize:"0.8rem"},children:r.jsx(V.Z,{fontSize:"small"})}),(0,r.jsxs)(a(),{children:[r.jsx(o(),{variant:"body2",fontWeight:500,children:e.file_name}),(0,r.jsxs)(o(),{variant:"caption",color:"text.secondary",children:[(e.file_size/1024).toFixed(1)," KB"]})]})]})}),(0,r.jsxs)(U(),{children:[r.jsx(o(),{variant:"body2",children:new Date(e.uploaded_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),r.jsx(o(),{variant:"caption",color:"text.secondary",children:new Date(e.uploaded_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),r.jsx(U(),{sx:{width:"55%"},children:r.jsx(ExtractionReport,{extract:e.extract})}),r.jsx(U(),{children:r.jsx(B(),{icon:getStatusIcon(e.status),label:e.status.toUpperCase(),color:getStatusColor(e.status),size:"small",sx:{fontWeight:500}})})]},e.id))})]})}),r.jsx(h(),{}),r.jsx(L(),{component:"div",count:t.length,page:i,onPageChange:(e,t)=>{l(t)},rowsPerPage:d,onRowsPerPageChange:e=>{c(parseInt(e.target.value,10)),l(0)},rowsPerPageOptions:[5,10,25,50],sx:{px:2}})]})})]})}},55331:(e,t,n)=>{n.d(t,{D:()=>InvoiceUploadForm});var r=n(30784),s=n(9885),i=n(76267),a=n.n(i),l=n(77782),o=n.n(l),d=n(43872),c=n.n(d),x=n(33987),u=n.n(x),h=n(61272),p=n.n(h),g=n(1853),j=n.n(g),f=n(53602),m=n(81932),b=n.n(m),v=n(92870),y=n.n(v),S=n(3683),I=n.n(S),w=n(16614),W=n.n(w),z=n(99360),P=n.n(z),R=n(16846),_=n(80067),Z=n(59125),C=n(57940),F=n(23458),U=n(23503);let InvoiceUploadForm=()=>{let[e,t]=(0,s.useState)(""),[n,i]=(0,s.useState)(""),[l,d]=(0,s.useState)(null),[x,h]=(0,s.useState)(!1),g=(0,F.TL)(),{loading:m,error:v}=(0,F.CG)(e=>e.invoice),handleSubmit=async r=>{if(r.preventDefault(),e&&n&&l)try{await g((0,U.rH)({userName:e,email:n,file:l})).unwrap(),h(!0),t(""),i(""),d(null);let r=document.getElementById("file-input");r&&(r.value=""),setTimeout(()=>{h(!1),g((0,U.fw)())},3e3)}catch(e){console.error("Upload failed:",e)}};return(0,r.jsxs)(a(),{elevation:4,sx:{mb:3,borderRadius:3,background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)"},children:[r.jsx(o(),{title:(0,r.jsxs)(c(),{display:"flex",alignItems:"center",gap:1,children:[r.jsx(R.Z,{color:"primary"}),r.jsx(u(),{variant:"h5",fontWeight:600,children:"Upload Invoice"})]}),subheader:"Upload PDF invoices for processing and analysis",sx:{pb:1}}),r.jsx(p(),{}),(0,r.jsxs)(j(),{sx:{p:3},children:[r.jsx(f.default,{in:x,children:r.jsx(c(),{children:x&&r.jsx(b(),{severity:"success",sx:{mb:3,borderRadius:2,"& .MuiAlert-icon":{fontSize:24}},children:"âœ“ Invoice uploaded successfully!"})})}),v&&r.jsx(b(),{severity:"error",sx:{mb:3,borderRadius:2,"& .MuiAlert-icon":{fontSize:24}},children:v}),(0,r.jsxs)(c(),{component:"form",onSubmit:handleSubmit,sx:{mt:2},children:[r.jsx(y(),{fullWidth:!0,label:"User Name",value:e,onChange:e=>t(e.target.value),required:!0,variant:"outlined",InputProps:{startAdornment:r.jsx(I(),{position:"start",children:r.jsx(_.Z,{color:"action"})})},sx:{mb:3,"& .MuiOutlinedInput-root":{borderRadius:2}}}),r.jsx(y(),{fullWidth:!0,label:"Email Address",type:"email",value:n,onChange:e=>i(e.target.value),required:!0,variant:"outlined",InputProps:{startAdornment:r.jsx(I(),{position:"start",children:r.jsx(Z.Z,{color:"action"})})},sx:{mb:3,"& .MuiOutlinedInput-root":{borderRadius:2}}}),(0,r.jsxs)(c(),{sx:{mb:3},children:[r.jsx("input",{id:"file-input",type:"file",accept:".pdf",onChange:e=>{let t=e.target.files?.[0];t&&"application/pdf"===t.type?d(t):alert("Please select a PDF file")},style:{display:"none"}}),r.jsx("label",{htmlFor:"file-input",children:r.jsx(W(),{variant:l?"contained":"outlined",component:"span",startIcon:r.jsx(C.Z,{}),fullWidth:!0,size:"large",sx:{py:1.5,borderRadius:2,textTransform:"none",fontSize:"1rem"},children:l?`ðŸ“„ ${l.name}`:"Select PDF File"})})]}),r.jsx(W(),{type:"submit",variant:"contained",fullWidth:!0,size:"large",disabled:!e||!n||!l||m,sx:{mt:2,py:1.5,borderRadius:2,textTransform:"none",fontSize:"1.1rem",fontWeight:600,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)","&:hover":{background:"linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%)"}},children:m?(0,r.jsxs)(c(),{display:"flex",alignItems:"center",gap:1,children:[r.jsx(P(),{size:20,color:"inherit"}),"Processing..."]}):"Upload Invoice"})]})]})]})}}};