"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[658],{4794:function(e,t,a){a.d(t,{n:function(){return i},B:function(){return l}});var r=a(4829);let n=r.Z.create({baseURL:"http://localhost:3000",timeout:3e4}),i={upload:async e=>{let t=new FormData;t.append("userName",e.userName),t.append("email",e.email),t.append("invoice",e.file);let a=await n.post("/api/invoices/upload",t,{headers:{"Content-Type":"multipart/form-data"}});return a.data},getAll:async()=>{let e=await n.get("/api/invoices");return e.data}},s=r.Z.create({baseURL:"http://localhost:3000",timeout:3e4}),l={create:async e=>{let t=await s.post("/api/users",e);return t.data},getByEmail:async e=>{let t=await s.get("/api/users/".concat(e));return t.data},getStats:async()=>{let e=await s.get("/api/users/stats");return e.data}}},3137:function(e,t,a){a.d(t,{R:function(){return InvoiceListView}});var r=a(7437),n=a(2265),i=a(9245),s=a(3226),l=a(8874),o=a(3457),d=a(4986),c=a(6882),u=a(5133),x=a(6114),p=a(3283),h=a(8469),g=a(5795),f=a(6857),v=a(6988),m=a(8489),j=a(666),Z=a(9279),b=a(7827),y=a(882),S=a(1664),w=a(5077),C=a(5618),I=a(2352),P=a(1846),R=a(502),_=a(1669),W=a(6896),z=a(9036);let getStatusColor=e=>{switch(e){case"uploaded":return"info";case"processing":return"warning";case"processed":case"completed":case"validated":return"success";case"failed":return"error";default:return"default"}},getFieldStatus=e=>null==e||""===e?{icon:(0,r.jsx)(S.Z,{sx:{color:"grey.400",fontSize:16}}),color:"grey.400"}:{icon:(0,r.jsx)(w.Z,{sx:{color:"success.main",fontSize:16}}),color:"success.main"},ExtractionReport=e=>{var t;let{extract:a}=e;if(!a)return(0,r.jsx)(i.Z,{sx:{p:2,bgcolor:"grey.50",borderRadius:1},children:(0,r.jsx)(s.Z,{variant:"body2",color:"text.secondary",children:"No extraction data available"})});let n=[{label:"Invoice Number",value:a.invoice_number},{label:"Sender Address",value:a.sender_address},{label:"Receiver Address",value:a.receiver_address},{label:"Product",value:a.product},{label:"Quantity",value:a.quantity},{label:"Unit Price",value:a.unit_price},{label:"Subtotal",value:a.subtotal},{label:"VAT Amount",value:a.vat_amount},{label:"Total Gross",value:a.total_gross},{label:"Bank IBAN",value:a.bank_iban},{label:"Bank BIC",value:a.bank_bic},{label:"Bank Name",value:a.bank_name}];return(0,r.jsxs)(i.Z,{sx:{p:2,bgcolor:"grey.50",borderRadius:1,minWidth:400},children:[(0,r.jsx)(s.Z,{variant:"subtitle2",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:"Extraction Report"}),(0,r.jsx)(l.ZP,{container:!0,spacing:1,children:n.map((e,t)=>{let a=getFieldStatus(e.value);return(0,r.jsx)(l.ZP,{item:!0,xs:12,children:(0,r.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:1,children:[a.icon,(0,r.jsxs)(s.Z,{variant:"caption",sx:{minWidth:100,fontSize:"0.7rem"},children:[e.label,":"]}),(0,r.jsx)(s.Z,{variant:"caption",sx:{fontSize:"0.7rem",color:e.value?"text.primary":"text.secondary",fontWeight:e.value?500:400},children:e.value||"Missing"})]})},t)})}),(0,r.jsx)(d.Z,{sx:{my:1}}),(0,r.jsxs)(s.Z,{variant:"caption",color:"text.secondary",children:["Status: ",a.processing_status," | Job ID: ",null===(t=a.textract_job_id)||void 0===t?void 0:t.slice(0,8),"..."]})]})},InvoiceListView=()=>{let e=(0,W.TL)(),{invoices:t,loading:a}=(0,W.CG)(e=>e.invoice),[l,o]=(0,n.useState)(0),[S,w]=(0,n.useState)(10);(0,n.useEffect)(()=>{e((0,z.WM)())},[e]);let D=t.slice(l*S,l*S+S),getStatusIcon=e=>{switch(e){case"uploaded":case"processing":return(0,r.jsx)(C.Z,{});case"processed":case"completed":return(0,r.jsx)(I.Z,{});case"validated":return(0,r.jsx)(P.Z,{});case"failed":return(0,r.jsx)(R.Z,{});default:return(0,r.jsx)(_.Z,{})}};return a?(0,r.jsx)(i.Z,{display:"flex",justifyContent:"center",p:4,children:(0,r.jsx)(c.Z,{size:40})}):(0,r.jsxs)(u.Z,{elevation:4,sx:{borderRadius:3,background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)"},children:[(0,r.jsx)(x.Z,{avatar:(0,r.jsx)(p.Z,{sx:{bgcolor:"primary.main"},children:(0,r.jsx)(_.Z,{})}),title:(0,r.jsx)(s.Z,{variant:"h5",fontWeight:600,children:"Invoice List"}),subheader:"".concat(t.length," total invoices")}),(0,r.jsx)(d.Z,{}),(0,r.jsx)(h.Z,{sx:{p:0},children:0===t.length?(0,r.jsxs)(i.Z,{display:"flex",flexDirection:"column",alignItems:"center",py:6,px:3,children:[(0,r.jsx)(_.Z,{sx:{fontSize:64,color:"grey.300",mb:2}}),(0,r.jsx)(s.Z,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No invoices uploaded yet"}),(0,r.jsx)(s.Z,{variant:"body2",color:"text.secondary",children:"Upload your first invoice to get started"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{children:(0,r.jsxs)(f.Z,{children:[(0,r.jsx)(v.Z,{children:(0,r.jsxs)(m.Z,{sx:{bgcolor:"grey.50"},children:[(0,r.jsx)(j.Z,{sx:{fontWeight:600,width:"20%"},children:"File Name"}),(0,r.jsx)(j.Z,{sx:{fontWeight:600,width:"15%"},children:"Date"}),(0,r.jsx)(j.Z,{sx:{fontWeight:600,width:"55%"},children:"Report"}),(0,r.jsx)(j.Z,{sx:{fontWeight:600,width:"10%"},children:"Status"})]})}),(0,r.jsx)(Z.Z,{children:D.map((e,t)=>(0,r.jsxs)(m.Z,{sx:{"&:hover":{bgcolor:"grey.50"},"&:nth-of-type(odd)":{bgcolor:"rgba(0,0,0,0.02)"}},children:[(0,r.jsx)(j.Z,{children:(0,r.jsxs)(i.Z,{display:"flex",alignItems:"center",gap:2,children:[(0,r.jsx)(p.Z,{sx:{width:32,height:32,bgcolor:"primary.light",fontSize:"0.8rem"},children:(0,r.jsx)(_.Z,{fontSize:"small"})}),(0,r.jsxs)(i.Z,{children:[(0,r.jsx)(s.Z,{variant:"body2",fontWeight:500,children:e.file_name}),(0,r.jsxs)(s.Z,{variant:"caption",color:"text.secondary",children:[(e.file_size/1024).toFixed(1)," KB"]})]})]})}),(0,r.jsxs)(j.Z,{children:[(0,r.jsx)(s.Z,{variant:"body2",children:new Date(e.uploaded_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),(0,r.jsx)(s.Z,{variant:"caption",color:"text.secondary",children:new Date(e.uploaded_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),(0,r.jsx)(j.Z,{sx:{width:"55%"},children:(0,r.jsx)(ExtractionReport,{extract:e.extract})}),(0,r.jsx)(j.Z,{children:(0,r.jsx)(b.Z,{icon:getStatusIcon(e.status),label:e.status.toUpperCase(),color:getStatusColor(e.status),size:"small",sx:{fontWeight:500}})})]},e.id))})]})}),(0,r.jsx)(d.Z,{}),(0,r.jsx)(y.Z,{component:"div",count:t.length,page:l,onPageChange:(e,t)=>{o(t)},rowsPerPage:S,onRowsPerPageChange:e=>{w(parseInt(e.target.value,10)),o(0)},rowsPerPageOptions:[5,10,25,50],sx:{px:2}})]})})]})}},4266:function(e,t,a){a.d(t,{D:function(){return InvoiceUploadForm}});var r=a(7437),n=a(2265),i=a(5133),s=a(6114),l=a(9245),o=a(3226),d=a(4986),c=a(8469),u=a(2261),x=a(9804),p=a(879),h=a(1679),g=a(9050),f=a(6882),v=a(6329),m=a(6013),j=a(4664),Z=a(6505),b=a(6896),y=a(9036);let InvoiceUploadForm=()=>{let[e,t]=(0,n.useState)(""),[a,S]=(0,n.useState)(""),[w,C]=(0,n.useState)(null),[I,P]=(0,n.useState)(!1),R=(0,b.TL)(),{loading:_,error:W}=(0,b.CG)(e=>e.invoice),handleSubmit=async r=>{if(r.preventDefault(),e&&a&&w)try{await R((0,y.rH)({userName:e,email:a,file:w})).unwrap(),P(!0),t(""),S(""),C(null);let r=document.getElementById("file-input");r&&(r.value=""),setTimeout(()=>{P(!1),R((0,y.fw)())},3e3)}catch(e){console.error("Upload failed:",e)}};return(0,r.jsxs)(i.Z,{elevation:4,sx:{mb:3,borderRadius:3,background:"linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%)"},children:[(0,r.jsx)(s.Z,{title:(0,r.jsxs)(l.Z,{display:"flex",alignItems:"center",gap:1,children:[(0,r.jsx)(v.Z,{color:"primary"}),(0,r.jsx)(o.Z,{variant:"h5",fontWeight:600,children:"Upload Invoice"})]}),subheader:"Upload PDF invoices for processing and analysis",sx:{pb:1}}),(0,r.jsx)(d.Z,{}),(0,r.jsxs)(c.Z,{sx:{p:3},children:[(0,r.jsx)(u.Z,{in:I,children:(0,r.jsx)(l.Z,{children:I&&(0,r.jsx)(x.Z,{severity:"success",sx:{mb:3,borderRadius:2,"& .MuiAlert-icon":{fontSize:24}},children:"âœ“ Invoice uploaded successfully!"})})}),W&&(0,r.jsx)(x.Z,{severity:"error",sx:{mb:3,borderRadius:2,"& .MuiAlert-icon":{fontSize:24}},children:W}),(0,r.jsxs)(l.Z,{component:"form",onSubmit:handleSubmit,sx:{mt:2},children:[(0,r.jsx)(p.Z,{fullWidth:!0,label:"User Name",value:e,onChange:e=>t(e.target.value),required:!0,variant:"outlined",InputProps:{startAdornment:(0,r.jsx)(h.Z,{position:"start",children:(0,r.jsx)(m.Z,{color:"action"})})},sx:{mb:3,"& .MuiOutlinedInput-root":{borderRadius:2}}}),(0,r.jsx)(p.Z,{fullWidth:!0,label:"Email Address",type:"email",value:a,onChange:e=>S(e.target.value),required:!0,variant:"outlined",InputProps:{startAdornment:(0,r.jsx)(h.Z,{position:"start",children:(0,r.jsx)(j.Z,{color:"action"})})},sx:{mb:3,"& .MuiOutlinedInput-root":{borderRadius:2}}}),(0,r.jsxs)(l.Z,{sx:{mb:3},children:[(0,r.jsx)("input",{id:"file-input",type:"file",accept:".pdf",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&"application/pdf"===a.type?C(a):alert("Please select a PDF file")},style:{display:"none"}}),(0,r.jsx)("label",{htmlFor:"file-input",children:(0,r.jsx)(g.Z,{variant:w?"contained":"outlined",component:"span",startIcon:(0,r.jsx)(Z.Z,{}),fullWidth:!0,size:"large",sx:{py:1.5,borderRadius:2,textTransform:"none",fontSize:"1rem"},children:w?"\uD83D\uDCC4 ".concat(w.name):"Select PDF File"})})]}),(0,r.jsx)(g.Z,{type:"submit",variant:"contained",fullWidth:!0,size:"large",disabled:!e||!a||!w||_,sx:{mt:2,py:1.5,borderRadius:2,textTransform:"none",fontSize:"1.1rem",fontWeight:600,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)","&:hover":{background:"linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%)"}},children:_?(0,r.jsxs)(l.Z,{display:"flex",alignItems:"center",gap:1,children:[(0,r.jsx)(f.Z,{size:20,color:"inherit"}),"Processing..."]}):"Upload Invoice"})]})]})]})}},6896:function(e,t,a){a.d(t,{CG:function(){return o},TL:function(){return useAppDispatch},h:function(){return l}});var r=a(9686),n=a(3046),i=a(9036),s=a(8951);let l=(0,r.xC)({reducer:{invoice:i.ZP,user:s.ZP},middleware:e=>e({serializableCheck:{ignoredActions:["invoice/uploadInvoice/pending"]}})}),useAppDispatch=()=>(0,n.I0)(),o=n.v9},9036:function(e,t,a){a.d(t,{WM:function(){return s},fw:function(){return o},rH:function(){return i}});var r=a(9686),n=a(4794);let i=(0,r.hg)("invoice/uploadInvoice",async e=>{let t=await n.n.upload(e);return t.data.invoice}),s=(0,r.hg)("invoice/fetchInvoices",async()=>{let e=await n.n.getAll();return e.data.invoices}),l=(0,r.oM)({name:"invoice",initialState:{invoices:[],loading:!1,error:null},reducers:{clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(i.pending,e=>{e.loading=!0,e.error=null}).addCase(i.fulfilled,(e,t)=>{e.loading=!1,e.invoices.unshift(t.payload)}).addCase(i.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Upload failed"}).addCase(s.pending,e=>{e.loading=!0}).addCase(s.fulfilled,(e,t)=>{e.loading=!1,e.invoices=t.payload}).addCase(s.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to fetch invoices"})}}),{clearError:o}=l.actions;t.ZP=l.reducer},8951:function(e,t,a){a.d(t,{_J:function(){return s}});var r=a(9686),n=a(4794);let i=(0,r.hg)("user/createUser",async e=>{let t=await n.B.create(e);return t.data.user}),s=(0,r.hg)("user/fetchUserStats",async()=>{let e=await n.B.getStats();return e.data}),l=(0,r.oM)({name:"user",initialState:{users:[],stats:null,loading:!1,error:null},reducers:{clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(i.fulfilled,(e,t)=>{e.users.unshift(t.payload)}).addCase(s.pending,e=>{e.loading=!0}).addCase(s.fulfilled,(e,t)=>{e.loading=!1,e.stats=t.payload}).addCase(s.rejected,(e,t)=>{e.loading=!1,e.error=t.error.message||"Failed to fetch stats"})}}),{clearError:o}=l.actions;t.ZP=l.reducer}}]);